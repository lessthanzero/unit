"use strict";var unitConverter={fromCurrency:"RUB",toCurrency:"USD"};unitConverter.updated=new Date,unitConverter.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],unitConverter.hideKeypad=!1,fx.settings={from:"RUB",to:"USD"},fx.rates={},fx.base="EUR";var result=0;unitConverter.switchKeypads=function(){$(".switch-input, .switch-output").click(function(){var t=$(this).parent().parent().find(".keypad"),e=$(".keypad").not(t);$(t).toggleClass("hidden"),$(e).addClass("hidden"),unitConverter.hideKeypad=!1})},unitConverter.selectCurrency=function(){$(".key").not(".period").click(function(){if(!$(this).hasClass("inactive")){var t=$(this).text(),e=$(this).parent().parent().find("button"),n=$(e).text();$(e).text(t),$(this).text(n),$(this).parent().parent().hasClass("input-container")?unitConverter.fromCurrency=t:unitConverter.toCurrency=t,$(".key").each(function(){unitConverter.hideKeypad||($(".keypad").addClass("hidden"),unitConverter.hideKeypad=!unitConverter.hideKeypad);var e=$(this).text();$(this).removeClass("inactive"),e!=t&&e!=$(".switch-input").text()&&e!=$(".switch-output").text()||$(this).addClass("inactive")}),$(".switch-input").text()==$(".switch-output").text()?unitConverter.handleErrors(2):unitConverter.handleErrors(0);var r=$("input").val();unitConverter.handleValues(r,unitConverter.fromCurrency,unitConverter.toCurrency)}})},unitConverter.handleErrors=function(t){var e="";0==t?$(".output-container__error").addClass("hidden"):(e=1==t?"Canâ€™t convert. Try to reload":"Wrong input",$(".result").text("0"),$(".output-container__error p").text("").text(e),$(".output-container__error").removeClass("hidden"))},unitConverter.handleInput=function(t,e,n){if("undefined"!=typeof fx&&fx.rates)fx.rates=t[0],fx.base=t[1];else t[0],t[1];$("#numericinput").keypress(function(t){var r=t.which,i=$(this).val();if(i.length>0){var u=parseFloat(i);void 0!==e&&u<e&&$(this).blur().val(e),void 0!==n&&u>n&&$(this).blur().val(n)}if(r>0&&(r<48||r>57)){if(46!=r)return 8==r||67==r||86==r;if(i.match(/[.]/))return!1}}),$("#numericinput").keyup(function(t){var e=$(this).val();unitConverter.handleValues(e,unitConverter.fromCurrency,unitConverter.toCurrency)}),$(".period").click(function(){$("#numericinput").sendkeys(".")})},unitConverter.handleValues=function(t,e,n){var r=0;r=isNaN(t)||""==t?0:fx.convert(t,{from:e,to:n}).toFixed(2),$(".result").text(unitConverter.numberWithSpaces(r)),unitConverter.fitNumbers(".result")},unitConverter.getRates=function(t){unitConverter.temp={},$.getJSON("https://api.fixer.io/latest",function(e){unitConverter.temp=[e.rates,e.base],$(".date").text(unitConverter.monthNames[unitConverter.updated.getMonth()]+" "+unitConverter.updated.getDate()+" "+unitConverter.updated.getHours()+":"+(parseInt(unitConverter.updated.getMinutes())<10?"0"+unitConverter.updated.getMinutes():unitConverter.updated.getMinutes())),t(unitConverter.temp)}).fail(function(){unitConverter.handleErrors("1")})},unitConverter.numberWithSpaces=function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")},unitConverter.fitNumbers=function(t){var e=$(t).width(),n=$(t).text().length,r=parseInt($(t).css("font-size"),10),i=1.75*e/n;r=i>32?32:i,$(t).css("font-size",r)},$(document).ready(function(){unitConverter.getRates(function(t){unitConverter.handleInput(t,0,999999999.99)}),unitConverter.switchKeypads(),unitConverter.selectCurrency()});